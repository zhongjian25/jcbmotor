$define([],function($){var init=function(){var Pagination={uri:"",pageSize:10,currentPage:1,totalPages:0,initUri:function(n){this.uri=n},initPagination:function(n,a,i){null!=a&&a==i&&1==a?$(".p_page").hide():$(".p_page").show(),null!=a&&a!=i&&1==a?$(".p_page").children(".pre").addClass("pre1"):$(".p_page").children(".pre").removeClass("pre1"),this.pageSize=null==n||"undefined"==n?10:n,this.currentPage=null==a||"undefined"==a?1:a,this.totalPages=null==i||"undefined"==i?0:i,null!=a&&1!=a&&a==i?$(".p_page").children(".next").addClass("next1"):$(".p_page").children(".next").removeClass("next1")},next:function(n,a,i,e,t,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,r);var o=this.uri,s=parseInt(n)+1;a<s&&(s=a),o=compositeUrl(o,i,s,r),this.hashChange(s,e),"function"==typeof t||"string"==typeof t?(invokeCallback(t,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+e).offset().top)):(asyncSubmit(o,"POST",e,r),Pagination.currentPage=s)},pre:function(n,a,i,e,t,r){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,r);var o=this.uri,s=n-1;s<=0&&(s=1),o=compositeUrl(o,i,s,r),this.hashChange(s,e),"function"==typeof t||"string"==typeof t?(invokeCallback(t,o,r),Pagination.currentPage=s,$(window).scrollTop($("#c_"+e).offset().top)):(asyncSubmit(o,"POST",e,r),Pagination.currentPage=s)},jump:function(n,a,i,e,t){this.filter({moudleReg:"companyplace/",callBacK:function(n,a){a.uri=n}},this,t);var r=compositeUrl(this.uri,a,n,t);this.hashChange(parseInt(n),i),"function"==typeof e||"string"==typeof e?(invokeCallback(e,r,t),Pagination.currentPage=parseInt(n),$(window).scrollTop($("#c_"+i).offset().top)):(asyncSubmit(r,"POST",i,t),Pagination.currentPage=parseInt(n))},ajax:function(){var n=compositeUrl(this.uri,this.pageSize,this.currentPage,this.params);asyncSubmit(n,"POST",this.divid,this.params)},filter:function(n,a,i){i.params&&i.params.url&&-1!=i.params.url.indexOf(n.moudleReg)&&n.callBacK(i.params.url,a)},hashChange:function(n,a){if(!Pagination.isHashChange){Pagination.isPopstateChange=!0;var i=location.hash.split("#");if(-1==location.hash.indexOf("#c_"+a))location.hash=location.hash+"#c_"+a+"-"+n;else{for(var e=0;e<i.length;e++)-1!=i[e].indexOf("c_"+a)&&(i[e]="c_"+a+"-"+n);location.hash=i.join("#")}Pagination.isPopstateChange=!1}}};invokeCallback=function(n,a,i){invokeInner(n,a,i)},invokeInner=function(callback,url,params){var isFun=!0;if("function"==typeof callback?isFun=!0:"string"==typeof callback&&(isFun=!1),isFun)callback(url,params);else{var strobj=JSON.stringify(params);eval(callback+"('"+url+"',("+strobj+"))")}},compositeUrl=function(n,a,i,e){return e.keymapping?n.indexOf("?")<=0?n+"?"+e.keymapping.pageSize+"="+a+"&"+e.keymapping.currentPage+"="+i:n+"&"+e.keymapping.pageSize+"="+a+"&"+e.keymapping.currentPage+"="+i:n.indexOf("?")<=0?n+"?pageSize="+a+"&currentPage="+i:n+"&pageSize="+a+"&currentPage="+i};var getPClass=function(n){for(var a=n.className.split(" "),i=0;i<a.length;i++)if("p_"==a[i].substring(0,2))return a[i]};return refreshDom=function(n,a,i){var e,t="c_"+a;if(i.contentObj){var r=getPClass(i.contentObj.get(0)),o=$("<div>").html(n);e=o.find("."+r).children(),i.noJs||(e=e.add(o.find("script"))),i.contentObj.html(e)}else $("#"+t).html(),$("#"+t).html(n);return $(window).scrollTop($("#"+t).offset().top),e},asyncSubmit=function(n,a,i,e){$.ajax({url:n,type:a,data:e.data,beforeSend:function(n){},error:function(n,a,i){},success:function(n){var a=refreshDom(n,i,e);e.successFun&&e.successFun(a)}})},Pagination};return{init:init}});