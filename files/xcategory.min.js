$define(["wgt_readyload","tmpl"],function(u,f){u.fn.initCategory=function(i,s){var n=$compCl.getScope(i.compId);e(i,n),a(i,n,s),u(".js_clickbtn").on("click",function(){u(this).hasClass("icon-arrow_up")&&(u(this).parent().parent().find(".js_clickbtn").addClass("icon-arrow_up").removeClass("icon-arrow_down"),u(this).parent().parent().find(".p_childBox").addClass("hide"))})};var e=function(i,l){var s=i.data,r=i.params,n=r.boxClass,e=u("."+n,l),o=r.tmplId,t=r.targetType,c=0;var a=function h(i){var s=/(http|https):\/\/([\w.]+\/?)\S*/;c++;for(var n=0;n<i.length;n++)i[n].subColumn&&(i[n].children=i[n].subColumn),i[n].childrenList&&(i[n].children=i[n].childrenList),i[n].children&&i[n].children.length||(i[n].parent=!1),i[n].image&&"/"!=i[n].image.substr(0,1)&&0==s.test(i[n].image)&&(i[n].image="/"+i[n].image),!0!==i[n][t]&&"true"!==i[n][t]&&"_blank"!=i[n][t]&&"2"!=i[n][t]||(i[n].setTarget=!0),i[n].level=c;for(var e=u("#"+o,l).tmpl(i),a=0;a<i.length;a++){var d;i[a].subColumn&&(i[a].children=i[a].subColumn),i[a].childrenList&&(i[a].children=i[a].childrenList),i[a].children&&i[a].children.length&&(d=h(i[a].children),0<e.length&&e.eq(a).find("."+r.childBox).html(d))}return e}(s);e.html(a)},a=function(i,s,n){var e=n||u.getUrlId(),a=i.params,d=a.isOpen,l=a.isReject,r=a.isSideOut,o=a.boxClass,t=u("."+o,s),c=a.clickBtn,h=u("."+a.clickBtn,t),p=a.parentBox,C=(u("."+a.parentBox,t),a.childBox),v=u("."+a.childBox,t),m=a.linkBox;u("."+a.linkBox,m);(d?(v.removeClass("hide"),r||h.removeClass("icon-arrow_up").addClass("icon-arrow_down")):(v.addClass("hide"),r||h.removeClass("icon-arrow_down").addClass("icon-arrow_up")),!r&&e)&&u(s).find("."+p+"[sortid='"+e+"']").each(function(){u(this).parent(".p_childBox")&&u(this).parent(".p_childBox").find("."+p+"[sortid='"+e+"']").find(".p_childBox").is(":hidden")?u(this).parent(".p_childBox").find("."+p+"[sortid='"+e+"']").children("."+m).find("i").hasClass("js_clickbtn")||(u(this).parents("."+C).removeClass("hide").prevAll("."+m).children("."+c).removeClass("icon-arrow_up").addClass("icon-arrow_down"),u(this).parent(".p_childBox").find("."+p+"[sortid='"+e+"']").children("."+m).addClass("click")):u(this).children("."+m).addClass("click")});r&&!d?(t.find("."+a.parentBox).each(function(i,s){var n=localStorage.getItem("navChildKey"),e=localStorage.getItem("navParentId");n&&"child"!=n&&n==u(this).attr("sortid")?(u(this).find(".p_childBox:first").prev().addClass("click"),u(this).parents(".p_parentBox").each(function(){u(this).find(".p_childBox:first").prev().addClass("click")})):e==u(this).attr("sortid")&&u(this).find(".p_childBox:first").prev().addClass("click")}),t.find("."+a.parentBox).on("mouseleave",function(){u(this).find("."+C).removeClass("slideOut").addClass("hide")}),t.find(".e_link").on("mouseover",function(){var i=u(this);if(l){i.closest("."+p).siblings("."+p).children("."+C).addClass("hide").removeClass("slideOut");var s=i.parents("."+p)[i.parents("."+p).length-1];u(s).siblings("."+p).children("."+C).addClass("hide").siblings("div").children("."+c).removeClass("slideOut")}0<i.closest("."+p).children("."+C).find("."+p).length&&(i.siblings("div").addClass("slideOut"),i.closest("."+p).children("."+C).removeClass("hide")),f.lazyImg()})):h.on("click",function(){var i=u(this);if(l){i.closest("."+p).siblings("."+p).children("."+C).addClass("hide").siblings("div").children("."+c).removeClass("icon-arrow_down").addClass("icon-arrow_up");var s=i.parents("."+p)[i.parents("."+p).length-1];u(s).siblings("."+p).children("."+C).addClass("hide").siblings("div").children("."+c).removeClass("icon-arrow_down").addClass("icon-arrow_up")}i.hasClass("icon-arrow_down")?(i.removeClass("icon-arrow_down").addClass("icon-arrow_up"),i.closest("."+p).children("."+C).addClass("hide")):(i.removeClass("icon-arrow_up").addClass("icon-arrow_down"),i.closest("."+p).children("."+C).removeClass("hide")),f.lazyImg(),f.setCompPostion()})};return u});