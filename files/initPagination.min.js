$define(["js/pagination/pagination"],function(l,u){return window.pagingIds={},init=function(){var n=this._params,t=this._params.params,i=this._params.id,r="c_"+i,p=t.callback,g=u.init();g.divid=i,g.params=n,g.initUri(t.url),g.initPagination(t.pageSize,t.currentPage,t.totalPages);var a=l("#"+r);a.undelegate(".jumpInput","input").delegate(".jumpInput","input",function(){var e=parseInt(l(this).val());e<1&&(e=1),e>t.totalPages&&(e=t.totalPages),l(this).val(e)}),a.undelegate(".next","click").delegate(".next","click",function(){return g.currentPage==g.totalPages||g.next(g.currentPage,g.totalPages,g.pageSize,i,p,n),!1}),a.undelegate(".pre","click").delegate(".pre","click",function(){return 1==g.currentPage||g.pre(g.currentPage,g.totalPages,g.pageSize,i,p,n),!1}),a.undelegate(".pageNum","click").delegate(".pageNum","click",function(){var e=this.innerHTML;if(g.currentPage!=parseInt(e))return g.jump(e,g.pageSize,i,p,n),!1}),a.undelegate(".pagesize","change").delegate(".pagesize","change",function(){this.innerHTML;var e=l("option:selected",this).val();return g.jump(l(".pageNum.active",a).html(),e,i,p,n),g.pageSize=e,!1}),a.undelegate(".jump","click").delegate(".jump","click",function(){var e=a.find(".jumpInput").val();if(e)return g.jump(e,g.pageSize,i,p,n),!1});var s=function(){var e,t=location.search,a=new Object;if(-1!=t.indexOf("?")){e=t.substr(1).split("&");for(var n=0;n<e.length;n++)a[e[n].split("=")[0]]=unescape(e[n].split("=")[1])}return a},e=function(){if(!g.isPopstateChange){var e,t=location.hash.split("#")?location.hash.split("#").slice(1):"";if(0==t.length&&s().compPage&&(t=s().compPage.split(",")?s().compPage.split(","):""),0<t.length){for(var a=0;a<t.length;a++)-1!=t[a].indexOf(r+"-")&&(e=t[a].replace(r+"-",""));e||(e=1)}else e=1;if(g.currentPage==parseInt(e))return;g.isHashChange=!0,g.jump(e,g.pageSize,i,p,n),g.isHashChange=!1}};return window.pagingIds[r]&&window.removeEventListener("popstate",window.pagingIds[r]),window.addEventListener("popstate",e),(window.pagingIds[r]=e)(),g},{init:init}});