$define(["wgt_util"],function(h){function y(e){return""!=e&&null!=e&&""!=h.trim(e)&&e!=undefined}return{init:function(){var o=this._params,i=(o.id,$compCl.getScope(o.id)),e=o.totalSite,n=o.product,a=o.info,t=o.companyfile,r=o.recruit,c=o.productMachine,u=o.productParts,l=[{name:"totalSite",value:e},{name:"product",value:n},{name:"course",value:o.course},{name:"teacher",value:o.teacher},{name:"info",value:a},{name:"atlas",value:o.atlas},{name:"recruit",value:r},{name:"companyfile",value:t},{name:"productMachine",value:c},{name:"productParts",value:u},{name:"intro",value:o.intro},{name:"question",value:o.question},{name:"mapPosition",value:o.mapPosition},{name:"corpVideo",value:o.corpVideo}];i.find(".p_input > .last").click(function(){i.find(".p_input > .InputText").val("")}),i.find(".p_searchBtnBox").click(function(){"block"===i.find(".p_headbox").css("display")?i.find(".p_headbox").css("display","none"):i.find(".p_headbox").css("display","block")});for(var d=o.appData,p=0;p<d.length;p++){d[p].name;for(var s=0;s<l.length;s++)d[p].name===l[s].name&&(d[p].name=l[s].value||d[p].name)}var m={data:d,hasImg:!1,handler:function(e,n){}},f=i.find(".p_select").simplySelect(m);function v(e){return e.replace(/[<>"&]/g,function(e,n,a){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}})}f.build(),i.find(".p_searchBtn").click(function(){var e=i.find("#search_keyword").val(),n=f.getValue().value;if(y(e)&&y(n)&&y(o.url)){var a=o.url;-1==a.indexOf("?")?a+="?":a+="&",a=a+"searchCategory="+encodeURIComponent(v(n))+"&searchKey="+encodeURIComponent(encodeURIComponent(e)),"_blank"==o.target?h.openNewWindow(a):h.openHref(a)}}),document.onkeyup=function(e){if(window.event&&(e=window.event),13==(e.charCode||e.keyCode)){var n=i.find("#search_keyword").val(),a=f.getValue().value;if(y(n)&&y(a)&&y(o.url)){var t=o.url;-1==t.indexOf("?")?t+="?":t+="&",t=t+"searchCategory="+encodeURIComponent(v(a))+"&searchKey="+encodeURIComponent(encodeURIComponent(n)),"_blank"==o.target?h.openNewWindow(t):h.openHref(t)}}}}}});